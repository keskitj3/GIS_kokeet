<!DOCTYPE html>
<html>
  <head>
    <title>GIS_project</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <style>
      html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }
      #map {
        height: 87%;
      }
      #goCenterUI, #getLocationUI {
      background-color: #fff;
      border: 2px solid #fff;
      border-radius: 3px;
      box-shadow: 0 2px 6px rgba(0,0,0,.3);
      cursor: pointer;
      float: left;
      margin-bottom: 22px;
      text-align: center;
      }

      #goCenterText, #getLocationText {
      color: rgb(25,25,25);
      font-family: Roboto,Arial,sans-serif;
      font-size: 15px;
      line-height: 25px;
      padding-left: 5px;
      padding-right: 5px;
      }

      #setCenterUI {
      margin-left: 12px;
      }

    </style>
  </head>
  
  <body>
    <h3>Kartta</h3>
    
    <div id="map"></div>
    <script>
    
var map;
var helsinki = {lat: 60.192059, lng: 24.945831};


/**
 * The CenterControl adds a control to the map that recenters the map on
 * Chicago.
 * @constructor
 * @param {!Element} controlDiv
 * @param {!google.maps.Map} map
 * @param {?google.maps.LatLng} center
 */
function CenterControl(controlDiv, map, center) {
  // We set up a variable for this since we're adding event listeners later.
  var control = this;
  // Set the center property upon construction
  control.center_ = center;
  controlDiv.style.clear = 'both';

  // Set CSS for the control border
  var goCenterUI = document.createElement('div');
  goCenterUI.id = 'goCenterUI';
  goCenterUI.title = 'Click to recenter the map';
  controlDiv.appendChild(goCenterUI);

  // Set CSS for the control interior
  var goCenterText = document.createElement('div');
  goCenterText.id = 'goCenterText';
  goCenterText.innerHTML = 'Keskitä';
  goCenterUI.appendChild(goCenterText);

  // Set CSS for the setCenter control border
  var getLocationUI = document.createElement('div');
  getLocationUI.id = 'getLocationUI';
  getLocationUI.title = 'Click to get the location';
  controlDiv.appendChild(getLocationUI);

  // Set CSS for the control interior
  var getLocationText = document.createElement('div');
  getLocationText.id = 'getLocationText';
  getLocationText.innerHTML = 'Paikanna';
  getLocationUI.appendChild(getLocationText);

  // Set up the click event listener for 'Center Map': Set the center of the map
  // to the current center of the control.
  goCenterUI.addEventListener('click', function() {
    var currentLocation = control.getCenter();
    map.getLocation(currentLocation);
  });

  // Set up the click event listener for 'Set Center': Set the center of the
  // control to the current center of the map.
  getLocationUI.addEventListener('click', function() {
    if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(function(position) {
          var helsinki = { lat: position.coords.latitude, lng: position.coords.longitude };
          var myLatlng = helsinki
          map.setCenter(helsinki);
          control.getLocation(helsinki);
        }, function() {
          handleLocationError(true, infoWindow, map.getCenter());
        });
      } else {
        // Browser doesn't support Geolocation
        handleLocationError(false, infoWindow, map.getCenter());
      }
  });
}

/**
 * Define a property to hold the center state.
 * @private
 */
CenterControl.prototype.center_ = null;

/**
 * Gets the map center.
 * @return {?google.maps.LatLng}
 */
CenterControl.prototype.getCenter = function() {
  return this.center_;
};

/**
 * Sets the map center.
 * @param {?google.maps.LatLng} center
 */
CenterControl.prototype.getLocation = function(center) {
  this.center_ = center;
};

// Note: This example requires that you consent to location sharing when
// prompted by your browser. If you see the error "The Geolocation service
// failed.", it means you probably did not give permission for the browser to
// locate you.

    function initMap() {
    	
      var customMapType = new google.maps.StyledMapType([
      {
        stylers: [
          {hue: '#890000'},
          {visibility: 'simplified'},
          {gamma: 0.5},
          {weight: 0.5}
        ]
      },
      {
        elementType: 'labels',
        stylers: [{visibility: 'off'}]
      },
      {
        featureType: 'water',
        stylers: [{color: '#890000'}]
      }
    ], {
      name: 'Custom Style'
  });
  var customMapTypeId = 'custom_style';

  var map = new google.maps.Map(document.getElementById('map'), {
    zoom: 12,
    center: {lat: 24.9375, lng: 60.1708}, 
    mapTypeControlOptions: {
      mapTypeIds: [google.maps.MapTypeId.ROADMAP, customMapTypeId]
    }
  });

  map.mapTypes.set(customMapTypeId, customMapType);
  map.setMapTypeId(customMapTypeId)
//  var infoWindow = new google.maps.InfoWindow({map: map});
  map.setCenter(helsinki);
			
      // Try HTML5 geolocation.
//      if (navigator.geolocation) {
//        navigator.geolocation.getCurrentPosition(function(position) {
//          var helsinki = { lat: position.coords.latitude, lng: position.coords.longitude };
//    
//          infoWindow.setPosition(helsinki);
//          infoWindow.setContent('Olet tässä!');
//          map.setCenter(helsinki);
//        }, function() {
//          handleLocationError(true, infoWindow, map.getCenter());
//        });
//      } else {
        // Browser doesn't support Geolocation
//        handleLocationError(false, infoWindow, map.getCenter());
//      }
  var centerControlDiv = document.createElement('div');
  var centerControl = new CenterControl(centerControlDiv, map, helsinki);

  centerControlDiv.index = 1;
  centerControlDiv.style['padding-top'] = '10px';
  map.controls[google.maps.ControlPosition.TOP_CENTER].push(centerControlDiv);

    	
    }
    
    function handleLocationError(browserHasGeolocation, infoWindow, pos) {
      infoWindow.setPosition(pos);
      infoWindow.setContent(browserHasGeolocation ?
                            'Error: The Geolocation service failed.' :
                            'Error: Your browser doesn\'t support geolocation.');
    }

    </script>
    
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDl_p_13lRrhIsR_mk4KoE-jNulaJKwAU4&signed_in=true&callback=initMap"
        async defer>
    </script>
    
  </body>
</html>
